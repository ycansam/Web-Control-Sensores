<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Datos Sensores</title>
</head>

<body>
    <header>Sensores</header>
    <!-- lista donde se van a mostrar todos los sensores -->
    <ul id="lista-sensores" style="display:flex; flex-direction: column; overflow: scroll;">
        <!-- Cabezeras -->
        <li id="sensor-" style="display:flex;">
            <p id="id-sensor-" style="margin-right:30px; width: 25%;">ID SENSOR</p>
            <p class="nombre-sensor" style="margin-right:30px;width: 25%;">NOMBRE SENSOR</p>
            <p class="temperatura" style="margin-right:30px;width: 25%;">TEMPERATURA ÂºC</p>
            <p class="dioxido" style="margin-right:30px;width: 25%;">DIOXIDO CARBONO %</p>
        </li>
    </ul>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
    $(function() {
        $.ajax({
            // hago una peticion Get a la api para obtener la lista de sensores
            type: "GET",
            url: "http://localhost:3050/obtenerSensores",
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded'
            },
            dataType: "json",
            data: {},
            success: function(arraySensores) {
                // para cada sensor le creo un li para que aparezca en el html
                arraySensores.forEach(function(sensor) {
                    console.log(sensor);
                    var html = '<li id="sensor-" style="display:flex;">' +
                        '            <p id="id-sensor-" style="margin-right:30px; width: 25%;">' + sensor.id_sensor + '</p>' +
                        '            <p class="nombre-sensor" style="margin-right:30px;width: 25%;">' + sensor.nombre + '</p>' +
                        '            <p class="temperatura" style="margin-right:30px;width: 25%;">' + sensor.temperatura + '</p>' +
                        '            <p class="dioxido" style="margin-right:30px;width: 25%;">' + sensor.dioxido_carbono + '</p>' +
                        '        </li>';
                    $('#lista-sensores').append(html);
                });

            },
            error: function() {
                console.log("error");
            },
            crossDomain: true
        })
    })
</script>

</html>